# =====================
# App
# =====================
APP_NAME=OpenClaw BFF
APP_ENV=local
LOG_LEVEL=INFO

# CORS: comma-separated origins. Use * for dev.
CORS_ALLOW_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =====================
# Database (PostgreSQL)
# =====================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@127.0.0.1:5432/openclaw_bff
DB_ECHO=false

# =====================
# MinIO (S3-compatible)
# =====================
MINIO_ENDPOINT=127.0.0.1:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET=openclaw-bff
MINIO_REGION=us-east-1
# Optional external base URL if MinIO is behind reverse proxy
MINIO_PUBLIC_BASE_URL=

# =====================
# OpenClaw Gateway
# =====================
# HTTP base (must include scheme and host)
OPENCLAW_HTTP_BASE=http://127.0.0.1:3434
# WebSocket URL (must include ws:// or wss://)
OPENCLAW_WS_URL=ws://127.0.0.1:3434/ws
# Token used by BFF to access OpenClaw (Authorization: Bearer ...)
OPENCLAW_BEARER_TOKEN=
# Optional headers for OpenClaw endpoints
OPENCLAW_DEFAULT_AGENT_ID=main

# =====================
# Keycloak (optional)
# =====================
# If false: auth is bypassed (useful for local dev before Keycloak is up)
KEYCLOAK_ENABLED=false

KEYCLOAK_ISSUER=http://127.0.0.1:8080/realms/openclaw
KEYCLOAK_JWKS_URL=http://127.0.0.1:8080/realms/openclaw/protocol/openid-connect/certs
KEYCLOAK_AUDIENCE=openclaw-bff
# Optional: if issuer/audience checks need tweaks
KEYCLOAK_VERIFY_AUD=true
KEYCLOAK_VERIFY_ISS=true

# When auth is disabled, this userId will be used.
DEV_USER_ID=dev-user

# =====================
# Behavior toggles
# =====================
# If true, allow FE to pass x-openclaw-session-key (NOT recommended)
ALLOW_RAW_OPENCLAW_SESSION_KEY=false

# If true, store assistant output in DB for streaming endpoints
PERSIST_STREAMED_MESSAGES=true

# =====================
# OpenClaw WS device signing (opzionale)
# =====================
# Se il tuo gateway richiede una device identity firmata:
# OPENCLAW_WS_DEVICE_ID=my-device
# OPENCLAW_WS_PRIVATE_KEY_B64=...
# OPENCLAW_WS_PUBLIC_KEY_B64=...
